---
let pathname = Astro.url.pathname
pathname = pathname.replace('/fr', '')
pathname = pathname.endsWith('/') ? pathname.slice(0, pathname.length - 1) : pathname

const isFrench = Astro.url.pathname.startsWith('/fr')
const home = isFrench ? 'Accueil' : 'Home'
const locale = isFrench ? '/fr' : ''

// Todo: wrong href with deep paths
const crumbs = pathname.split('/').map((path, i) => {
	const href = `${locale}/${path}`
	const text = i === 0 ? home : path
	return [href, text]
})
---

<div>
	<h1>
		<slot />
	</h1>

	<ul>
		{
			crumbs.map(([href, text]) => (
				<li>
					<a href={href}>{text}</a>
				</li>
			))
		}
	</ul>
</div>

<style>
	div {
		width: fit-content;
		text-align: center;
		margin: auto;
		padding: 1rem 0 2rem;
		font-weight: 500;
	}

	h1 {
		padding: 0;
		line-height: 1.5em;
	}

	ul {
		padding: 0;
		margin: 0;
		opacity: 0.8;
		list-style: none;
	}

	div ul li a {
		color: inherit;
	}

	li {
		display: inline;
		cursor: default;
		text-transform: capitalize;
	}

	li::after {
		content: '>';
		margin: 0 0.3em;
	}

	li:last-child::after {
		display: none;
	}
</style>
