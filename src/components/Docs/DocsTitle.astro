---
import useTranslation from '../../locales/useTranslation'

const { t, locale } = useTranslation(Astro)
const { pathname } = new URL(Astro.request.url)
const paths = pathname.replace('/fr', '').split('/')

const crumbs = paths.map((path, i) => {
	const href = `${locale}/${path}`
	const text = i === 0 ? t('Home') : path
	return [href, text]
})
---

<div>
	<h1>
		<slot />
	</h1>

	<ul>
		{
			crumbs.map(([href, text]) => (
				<li>
					<a href={href}>{text}</a>
				</li>
			))
		}
	</ul>
</div>

<style>
	div {
		width: fit-content;
		text-align: center;
		margin: auto;
		padding: 1rem 0 2rem;
		font-weight: 500;
	}

	h1 {
		padding: 0;
		line-height: 1.5em;
	}

	ul {
		padding: 0;
		margin: 0;
		opacity: 0.8;
		list-style: none;
	}

	div ul li a {
		color: inherit;
	}

	li {
		display: inline;
		cursor: default;
		text-transform: capitalize;
	}

	li::after {
		content: '>';
		margin: 0 0.3em;
	}

	li:last-child::after {
		display: none;
	}
</style>
